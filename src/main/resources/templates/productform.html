<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
 
    <title>Spring Framework Guru</title>
 
    <!--/*/ <th:block th:include="fragments/headincludes :: head"></th:block> /*/-->
    
    <link href="../static/css/products.css" th:href="@{/css/products.css}" rel="stylesheet" media="screen"/>
	
</head>
<body>
<div class="container">
    <!--/*/ <th:block th:include="fragments/header :: header"></th:block> /*/-->
 
    <h2>Product Details</h2>
    <div>
        <form class="form-horizontal" th:object="${product}" th:action="@{/product}" method="post" enctype="multipart/form-data">
            
            <div class="form-group">
                <label class="col-sm-2 control-label">Product Id:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" th:field="*{pkProductId}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Product Name:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" th:field="*{productName}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Description:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" th:field="*{productDescription}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Price:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" th:field="*{price}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Inventory Quantity:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" th:field="*{inventoryQuantity}"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Product Thumbnail:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="thumbnailUri" name ="thumbnailUri" th:value="*{thumbnailUri}" readonly="true" />
                    
                    <img class="editform-img" id="thumbnailImg" th:src="@{__*{thumbnailUri}__}">
                    
                    <br>
                    <input type="file" id="thumbnailFileChooser" name="thumbnailFileChooser" accept="image/*" >
                    <script>
                    	$('#thumbnailFileChooser').change(function(e){
                    		  if (this.files && this.files[0]) {
                    			    var reader = new FileReader();                    			    
                    			                        			    
                    			    $('#thumbnailUri').attr('value', "/images/products/productimages/" + e.target.files[0].name);
                    			    
                    			                        			    
                			        reader.onload = function(ev) {
                			        	$('#thumbnailImg').attr('src', ev.target.result);
                    			    }
									
                			        reader.readAsDataURL(this.files[0]);
                			        
                    			  }
                    			});
                    </script>
                </div>
            </div>
            
            <br>
            <br>
            
            
            <h3>All Images</h3>
            
            <!-- Show all other images -->
            <div th:each="productImage : *{productimages}">
            <br>            
	            <div class="form-group">
	                <label class="col-sm-2 control-label">Other Image Uri:</label>
	                <div class="col-sm-6">
	                    <input type="text" class="form-control" id="imageUri" name="files[]" th:value="${productImage.imageUri}"/>
	                    <input type="hidden" name="files[]" id="${'imageFile' + productImage.index}"/>
	                    
	                    <img class="editform-img" th:src="@{__${productImage.imageUri}__}">
	                    
	                    <br>                    
	                    <input type="file" id="${'imageFileChooser' + productImage.index}" accept="image/*" >
	                    <script>
	                    	
	                    </script>
	                </div>
	            </div>
	            
	            <div class="form-group">
	                <label class="col-sm-2 control-label">Other Image View Name:</label>
	                <div class="col-sm-10">
	                    <input type="text" class="form-control" id="imageViewName" name="names[]" th:value="${productImage.viewName}" />
	                </div>
	            </div>
            
            <hr>
            
            </div>
            
            <br>
            <br>
            
            <!-- Add more images -->
            <div class="form-group">                
                <div class="col-sm-10">
					<input type="submit" value="Add Another Image" id="addAnotherImage" class="btn btn-sm bg-dark text-white"/>
                </div>
            </div>
            
            <br>
            <br>
            <div class="row">
                <button type="submit" class="btn btn-default bg-dark text-white">Update Product Record</button>
            </div>
        </form>
    </div>
</div>

<br>
<br>

<!-- Footer -->
    <footer class="py-5 bg-dark">
		<!--/*/ <th:block th:include="fragments/footer :: footer"></th:block> /*/-->
    </footer>
 
</body>
</html>